<% if @store.present? %>
  <% if @store.layout_setting.present? && @store.layout_setting.preferences.present? %>
    <% styles = @store.layout_setting.preferences %>
    <% primary = styles[:primary_font] %>
    <% secondary = styles[:secondary_font] %>
    <% bg_color_primary = styles[:bg_color][:primary] %>
    <% bg_color_secondary = styles[:bg_color][:secondary] %>

    <style type="text/css">
      :root{
        --primary-font: <%= primary %>;
        --secondary-font: <%= secondary %>;
        --primary-bg-color: <%= bg_color_primary %>;
        --secondary-bg-color: <%= bg_color_secondary %>;
      }
      <% if valid_style?(styles[:paragraph]) %>
        p{
          font-family: <%= css_font_family(styles[:paragraph][:type]) %>;
          color: <%= styles[:paragraph][:colorCode] %>;
          font-size: <%= css_font_size(styles[:paragraph][:size]) %>;
        }
      <% end %>
      <% if valid_style?(styles[:heading_1]) %>
        h1{
          font-family: <%= css_font_family(styles[:heading_1][:type]) %>;
          color: <%= styles[:heading_1][:colorCode] %>;
          font-size: <%= css_font_size(styles[:heading_1][:size]) %>;
        }
      <% end %>
      <% if valid_style?(styles[:heading_2]) %>
        h2{
          font-family: <%= css_font_family(styles[:heading_2][:type]) %>;
          color: <%= styles[:heading_2][:colorCode] %>;
          font-size: <%= css_font_size(styles[:heading_2][:size]) %>;
        }
      <% end %>
      <% if valid_style?(styles[:heading_3]) %>
        h3{
          font-family: <%= css_font_family(styles[:heading_3][:type]) %>;
          color: <%= styles[:heading_3][:colorCode] %>;
          font-size: <%= css_font_size(styles[:heading_3][:size]) %>;
        }
      <% end %>
      <% if valid_style?(styles[:heading_4]) %>
        h4{
          font-family: <%= css_font_family(styles[:heading_4][:type]) %>;
          color: <%= styles[:heading_4][:colorCode] %>;
          font-size: <%= css_font_size(styles[:heading_4][:size]) %>;
        }
      <% end %>
      <% if valid_style?(styles[:heading_5]) %>
        h5{
          font-family: <%= css_font_family(styles[:heading_5][:type]) %>;
          color: <%= styles[:heading_5][:colorCode] %>;
          font-size: <%= css_font_size(styles[:heading_5][:size]) %>;
        }
      <% end %>
      <% if valid_style?(styles[:heading_6]) %>
        h6{
          font-family: <%= css_font_family(styles[:heading_6][:type]) %>;
          color: <%= styles[:heading_6][:colorCode] %>;
          font-size: <%= css_font_size(styles[:heading_6][:size]) %>;
        }
      <% end %>
      <% if valid_style?(styles[:href_link]) %>
        a{
          font-family: <%= css_font_family(styles[:href_link][:type]) %>;
          color: <%= styles[:href_link][:colorCode] %>;
          font-size: <%= css_font_size(styles[:href_link][:size]) %>;
        }
      <% end %>
      <% if valid_style?(styles[:href_link_active]) %>
        a:hover{
          font-family: <%= css_font_family(styles[:href_link_active][:type]) %>;
          color: <%= styles[:href_link_active][:colorCode] %>;
          font-size: <%= css_font_size(styles[:href_link_active][:size]) %>;
        }
      <% end %>
      <% if valid_style?(styles[:button]) %>
        button, .btn, .btn-primary{
          font-family: <%= css_font_family(styles[:button][:type]) %>;
          color: <%= styles[:button][:colorCode] %>;
          font-size: <%= css_font_size(styles[:button][:size]) %>;
        }
      <% end %>
      <% if valid_style?(styles[:button_active]) %>
        button:hover, .btn:hover, .btn-primary:hover{
          font-family: <%= css_font_family(styles[:button_active][:type]) %>;
          color: <%= styles[:button_active][:colorCode] %>;
          font-size: <%= css_font_size(styles[:button_active][:size]) %>;
        }
      <% end %>
    </style>
  <% end %>

  <% if @store.layout_setting&.preferred_custom_css_url.present? %>
      <link
      rel="stylesheet"
      href="<%= @store.layout_setting.preferred_custom_css_url %>">
  <% else %>
    <style type="text/css">
      <%= @store.layout_setting.preferred_custom_css.html_safe rescue nil %>
    </style>
  <% end %>
<% end %>
